generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(uuid())
  email         String    @unique
  name          String
  password      String
  phone         String?
  address       String?
  dob           DateTime?
  gender        String?
  ethnicity     String?
  profession    String?
  qualification String?
  province      String?
  district      String?
  municipality  String?
  ward          String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@map("users")
}

model Notice {
  id            String    @id @default(uuid())
  title         String
  tags          String[]  @default([])
  description   String?
  effectiveFrom DateTime?
  deadline      DateTime?
  // sector         String?
  // level          String?
  url           String?

  province     String?
  district     String?
  municipality String?
  ward         String?

  contact       String?
  ageGroup      String?
  gender        String?
  ethnicity     String?
  profession    String?
  qualification String?

  // OCR and AI extracted fields
  ocrText          String?  // Full OCR extracted text
  ocrConfidence    Float?   // OCR confidence score
  extractedFields  Json?    // Structured data extracted by LLM
  processingStatus String   @default("pending") // pending, processing, completed, failed

  status    String   @default("draft") // draft, pending, published, archived
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("notices")
}